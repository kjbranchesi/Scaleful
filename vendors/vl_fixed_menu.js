!function(s){"use strict";function t(t){this.options=s.extend({slickyClass:"fixed",extraOffset:".js-offset",fakeBlock:!0,fakeBlockClass:"fake-block",scrollClasses:!1,scrollTopClass:"scroll-up",scrollBottomClass:"scroll-down",offset:0},t),this.init()}var i=s(window);t.prototype={init:function(){this.options.panel&&(this.initStructure(),this.attachEvents())},initStructure:function(){this.panel=s(this.options.panel),this.height=this.panel.outerHeight(),this.offset=this.getTargetOffset(this.options.extraOffset),this.fake=s('<div class="'+this.options.fakeBlockClass+'"></div>'),this.resizeFlag=!1,this.isActive=!1,this.scrollPosition=0,this.scrollPositionPrev=0,this.options.fakeBlock&&this.fake.insertBefore(this.panel).css({display:"none",height:this.height})},attachEvents:function(){var s=this;this.onScrollHandler=function(){s.scrollHandler()},this.onResizeWindow=function(){s.resizeFlag||s.windowResize()},i.on("scroll",this.onScrollHandler),i.on("resize orientationchange",this.onResizeWindow)},getTargetOffset:function(t){return"number"==typeof this.options.extraOffset?t=this.options.extraOffset:"string"==typeof this.options.extraOffset&&(t=s(this.options.extraOffset).offset().top+s(this.options.extraOffset).outerHeight()),t},scrollHandler:function(){var s=i.scrollTop();s>this.offset?this.isActive||(this.panel.addClass(this.options.slickyClass),this.options.fakeBlock&&this.fake.show(),this.isActive=!0):this.isActive&&(this.panel.removeClass(this.options.slickyClass),this.options.fakeBlock&&this.fake.hide(),this.isActive=!1),this.options.scrollClasses&&(this.scrollPosition=s,this.scrollPosition>this.scrollPositionPrev?(this.panel.addClass(this.options.scrollBottomClass),this.panel.removeClass(this.options.scrollTopClass)):(this.panel.addClass(this.options.scrollTopClass),this.panel.removeClass(this.options.scrollBottomClass)),this.scrollPositionPrev=this.scrollPosition)},windowResize:function(){this.options.fakeBlock?(this.height=this.panel.outerHeight(),this.offset=this.getTargetOffset(this.options.extraOffset),this.fake.css({height:this.height})):this.offset=this.getTargetOffset(this.options.extraOffset),this.scrollHandler()},destroy:function(){console.log(1),this.options.fakeBlock&&this.fake.remove(),this.resizeFlag=!0,this.panel.removeClass(this.options.slickyClass).removeClass(this.options.scrollTopClass).removeClass(this.options.scrollBottomClass),i.off("scroll",this.onScrollHandler),i.off("resize",this.onResizeWindow)}},s.fn.stickyPanel=function(i){return this.each(function(){jQuery(this).data("StickyPanel",new t(s.extend(i,{panel:this})))})}}(jQuery);